{"chunk":0,"numChunks":1,"fileHash":"F3XCsFQB+of+BA8lkMT0inmd+aqeW+heyzUpNayeGZg=","filePath":"backend/routes/saveTrails.js","content":"const express = require('express')\r\nconst jwt = require('jsonwebtoken')\r\n\r\n\r\nconst trail = require('../models/trail')\r\nconst saveTrailRouter = express.Router();\r\n\r\nsaveTrailRouter.post('/saveTrail', (req,res) =>{\r\nconst today = new Date()\r\nconst trailData = {\r\n    trailId: req.body.trailId,\r\n    trailName: req.body.trailName,\r\n    location: req.body.location,\r\n    difficulty: req.body.difficulty,\r\n    length: req.body.length,\r\n    trailComments: req.body.trailComments,\r\n    savedAt: today\r\n    // description to be set by our website // \r\n}\r\n\r\ntrail.findOne({\r\ntrailId: req.body.trailId\r\n})\r\n.then(trail =>\r\n{\r\n    if(!trail)\r\n    {\r\n        const newTrail = new trail(trailData)\r\n        newTrail.save()\r\n        .then(trail =>\r\n            {\r\n                res.json({status: trail.trailName + ' saved!'})\r\n            })\r\n            .catch(err =>\r\n                {\r\n                    res.send('error: ' + err)\r\n                })\r\n    }\r\n    else\r\n    {\r\n        res.json({error: 'trail already saved'})\r\n    }\r\n})\r\n.catch(err =>\r\n    {\r\n        res.send('error: ' + err)\r\n    })\r\n    })\r\n\r\nmodule.exports = saveTrailRouter; "}